$(function(){$(".navbar-right").html('');$.ajax({type:"Post",url:"/HttpProxyAccess.aspx/ajax_whether",contentType:"application/json; charset=utf-8",dataType:"json",cache:false,success:function(data){var json=eval('('+data.d+')');$(".navbar-right").html(json.msg)}})});function ajax_export(){var plain=$("#cipher-text").val();$("#result").html('<div class="alert alert-success" role="alert">正在导入数据...</div>');if(plain==""){$('#result').html('<div class="alert alert-success" role="alert">请输入需要导入的数据!</div>');return false}$("#return-text").html("");plain=plain.replace(/\+/g,"%2B");$.ajax({type:"Post",url:"/HttpProxyAccess.aspx/ajax_export",data:"{'plains': '"+escape(plain)+"'}",contentType:"application/json; charset=utf-8",dataType:"json",cache:false,success:function(data){var json=eval('('+data.d+')');$("#result").html(json.msg)}});return false}function hexToString(str){var val="";var arr=str.split(",");for(var i=0;i<arr.length;i++){val+=arr[i].fromCharCode(i)}return val}function stringToHex(str){var val="";for(var i=0;i<str.length;i++){if(val=="")val=str.charCodeAt(i).toString(16);else val+=","+str.charCodeAt(i).toString(16)}return val}function logout(){$.ajax({type:"Post",url:"/HttpProxyAccess.aspx/ajax_logout",contentType:"application/json; charset=utf-8",dataType:"json",cache:false,success:function(data){var json=eval('('+data.d+')');$(".navbar-right").html(json.msg)}})}var page_offset=0;function ajax_post(url,data,handle){$.ajax({type:'POST',url:url,data:"isajax={$rand}&"+data,beforesend:function(xmlhttprequest){xmlhttprequest.setrequestheader("request_type","ajax")},success:handle})}function get_md5(){$("#show_result").html('');var md5=$("#search_md5").val();if(md5==''){$("#md5").focus();$("#show_result").slideDown('fast',function(){$("#show_result").html('请填入MD5码')});timer_slideToggle('#show_result','fast',2500);return false}if(is_md5(md5)){$("#searchtip").html("\"\"");$("#searchtip").show();$("#show_result").slideUp();var data="md5="+md5;ajax_post('?mod=index&act=md5',data,function(data){$("#show_result").slideDown('fast',function(){$("#searchtip").hide();$("#show_result").html(data)})})}return false}function submit_md5(){var md5=$("#search_md5").val();if(md5==''){$("#md5").focus();$("#show_result").slideDown('fast',function(){$("#show_result").html('请填入MD5码')});timer_slideToggle('#show_result','fast',2500);return false}if(is_md5(md5)){$("#searchtip").html("\"\"");$("#searchtip").show();$("#show_result").slideUp();var data="md5="+md5;ajax_post('?mod=index&act=tjmd5',data,function(data){$("#show_result").slideDown('fast',function(){$("#searchtip").hide();$("#show_result").html(data)})})}return false}function submit_md5pwd(){var md5=$("#submit_md5").val();var pwd=$("#submit_pwd").val();if(md5==''){$("#submit_md5").focus();$("#show_result").slideDown('fast',function(){$("#show_result").html('请填入MD5码')});timer_slideToggle('#show_result','fast',2500);return false}if(pwd==''){$("#submit_pwd").focus();$("#show_result").slideDown('fast',function(){$("#show_result").html('请填入明码')});timer_slideToggle('#show_result','fast',2500);return false}if(!is_pwd(pwd)){$("#submit_pwd").focus();$("#submit_pwd").select();$("#show_result").slideDown('fast',function(){$("#show_result").html('明码无法识别或无法处理')});timer_slideToggle('#show_result','fast',2500);return false}if(is_md5(md5)){$("#searchtip").html("\"\"");$("#searchtip").show();$("#show_result").slideUp();var data="md5="+md5+"&pwd="+encodeURIComponent(pwd);ajax_post('?mod=index&act=md5tj',data,function(data){$("#show_result").slideDown('fast',function(){$("#searchtip").hide();$("#show_result").html(data);$("#submit_md5").val('');$("#submit_pwd").val('')})})}return false}function to_md5(){var input=$("#input_str").val().toString();if(input==''){$("#input_str").focus();$("#show_tomd5").html('请输入需要转为MD5的字符串')}else{$("#input_str").focus();$("#input_str").select();var md5=hex_md5(input);$("#show_tomd5").html(''+md5+'')}$("#show_tomd5").toggleDown('fast')}function js_page(action,nowpage,url,loading,container){if(action=='pre'){var nextpage=parseInt(nowpage)-1}else{var nextpage=parseInt(nowpage)+1}var data='p='+nextpage;$('#'+loading).html("\"\"");ajax_post(url,data,function(data){$('#'+loading).html('');$('#'+container).html(data)})}function trim(str){return str.replace(/(^\s*)|(\s*$)/g,"")}function is_md5(md5){var md5=trim(md5);if(md5.length!=16&&md5.length!=32){$("#result").html('不正常的MD5格式，您确定你遇到的是MD5码吗~~');return false}return true}function is_pwd(pwd){return true;var reg=/^([a-zA-Z0-9]|[\uFE30-\uFFA0|\/:])*$/gi;if(!reg.test(pwd)){return false}else{return true}}function timer_slideToggle(id,speed,timer){if($(id).css('display')=='none')timer=0;set_timer("$('"+id+"').slideToggle('"+speed+"');",timer)}function timer_hide(id,timer){set_timer("$('"+id+"').hide();",timer)}function timer_redirect(url,timer){set_timer("window.location.href='"+url+"';",timer)}function set_timer(action,timer){setTimeout(action,timer)}function hover_effect(id,issidebar){$(id).hover(function(){if(issidebar){if($(this).attr('class')==''){$(this).css('background','#FCFCFC')}}else{$(this).css('background','#FCFCFC')}});$(id).mouseout(function(){if(issidebar){if($(this).attr('class')==''){$(this).css('background','#F9F9F9')}}else{$(this).css('background','#F9F9F9')}})}function isEmail(str){var myReg=/^[-_A-Za-z0-9.]+@([_A-Za-z0-9]+\.)+[A-Za-z0-9]{2,3}$/;if(myReg.test(str))return true;return false}function get_mingma(){$("#show_tishikuang").html('');var mingma=$("#search_mingma").val();mingma=mingma.replace(/\+/g,"%2B");if(mingma==''){$("#mingma").focus();$("#show_tishikuang").slideDown('fast',function(){$("#show_tishikuang").html('请填入明码')});timer_slideToggle('#show_tishikuang ','fast ',2500);return false}if(mingma){$("#searchtia").show();$("#show_tishikuang").slideUp();var mdata="mingma="+mingma;$.ajax({type:"Post",url:"/HttpProxyAccess.aspx/ajax_receive_data",data:"{'pwd': '"+escape(mingma)+"'}",contentType:"application/json; charset=utf-8",dataType:"json",cache:false,success:function(data){var json=eval('('+data.d+')');$("#show_tishikuang").slideDown('fast ',function(){$("#searchtia").hide();$("#show_tishikuang").html(json.msg)})}})}return false}function get_domain(){$("#show_domaintsk").html('');var domain=$("#search_domain").val();if(domain==''){$("#domain").focus();$("#show_domaintsk").slideDown('fast ',function(){$("#show_domaintsk").html('请输入要查询的URL')});timer_slideToggle('#show_domaintsk ','fast ',2500);return false}if(domain){$("#searchtia").html("\"\"");$("#searchtia").show();$("#show_domaintsk").slideUp();var domain="domain="+domain;ajax_post(' ? mod = tools & act = domain ',domain,function(domain){$("#show_domaintsk").slideDown('fast ',function(){$("#searchtia").hide();$("#show_domaintsk").html(domain)})})}return false}function get_ipcx(){$("#show_ipcxtsk").html('');var ipcx=$("#search_ipcx").val();if(ipcx==''){$("#ipcx").focus();$("#show_ipcxtsk").slideDown('fast ',function(){$("#show_ipcxtsk").html('请输入要查询的URL ')});timer_slideToggle('#show_domaintsk ','fast ',2500);return false}if(ipcx){$("#searchtia").html("\"\"");$("#searchtia").show();$("#show_ipcxtsk").slideUp();var ipcx="ipcx="+ipcx;ajax_post(' ? mod = curl & act = ip ',ipcx,function(ipcx){$("#show_ipcxtsk").slideDown('fast ',function(){$("#searchtia").hide();$("#show_ipcxtsk").html(ipcx)})})}return false}function get_user(){$.ajax({type:"Post",url:"/HttpProxyAccess.aspx/ajax_user",contentType:"application/json; charset=utf-8",dataType:"json",cache:false,success:function(data){var json=eval('('+data.d+')');$("#result").html(json.msg);$("#email").html(json.result)}})}function ajax_changepass(){var pass=$("#pass").val();var ch_pass=$("#ch_pass").val();$("#result").html('<div class="alert alert-success" role="alert">正在验证...</div>');if(pass==""||ch_pass==""){$('#result').html('<div class="alert alert-success" role="alert">请输入旧密码和新密码!</div>');return false}$.ajax({type:"Post",url:"/HttpProxyAccess.aspx/ajax_changepass",contentType:"application/json; charset=utf-8",data:"{'pass': '"+pass+"','ch_pass': '"+ch_pass+"'}",dataType:"json",cache:false,success:function(data){var json=eval('('+data.d+')');$("#result").html(json.msg)}});return false}function ajax_charge(){var keys=$("#keys").val();if(keys==""){$('#result').html('<div class="alert alert-success" role="alert">请输入充值秘钥!</div>');return false}$("#result").html('<div class="alert alert-success" role="alert">正在验证...</div>');$.ajax({type:"Post",url:"/HttpProxyAccess.aspx/ajax_charge",contentType:"application/json; charset=utf-8",data:"{'keys': '"+keys+"'}",dataType:"json",cache:false,success:function(data){var json=eval('('+data.d+')');$("#result").html(json.msg)}});return false}function getUrlParam(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");var r=window.location.search.substr(1).match(reg);if(r!=null)return unescape(r[2]);return null}